# Zapier Automation Specification
## Doski Concrete Coatings - Landing Page Lead Automation

**Business:** Doski Concrete Coatings (Garage/Concrete Coatings in Binghamton, NY)  
**Purpose:** Automatically process leads from quiz landing page into Jobber CRM and notify owners via SMS

---

## TRIGGER

### App: Webhooks by Zapier
- **Event Type:** Catch Hook
- **Purpose:** Receive lead data from quiz landing page
- **Webhook URL:** (Generated by Zapier - copy this URL to your landing page form submission)

### Expected Webhook Payload Fields:
```json
{
  "full_name": "John Smith",
  "email": "john.smith@example.com",
  "phone": "6075551234",
  "street": "123 Main Street",
  "city": "Binghamton",
  "state": "NY",
  "zip": "13901",
  "project_type": "Garage Floor Coating",
  "approx_sqft": "500",
  "timeline": "Before Winter",
  "owns_home": "Yes",
  "notes": "Interested in polyurea coating for 2-car garage"
}
```

### Field Descriptions:
- `full_name` - Customer's full name
- `email` - Customer email address
- `phone` - Customer phone number (format: digits only or with formatting)
- `street` - Street address
- `city` - City name
- `state` - State abbreviation (e.g., "NY")
- `zip` - ZIP code
- `project_type` - Type of project (e.g., "Garage Floor Coating", "Driveway Coating")
- `approx_sqft` - Approximate square footage
- `timeline` - When customer wants work done
- `owns_home` - "Yes" or "No"
- `notes` - Additional notes or comments

---

## ACTION 1: Create Client in Jobber

### App: Jobber
- **Event Type:** Create Client
- **Purpose:** Create a new client record in Jobber CRM

### Field Mappings:

| Jobber Field | Source | Notes |
|--------------|--------|-------|
| **First Name** | `full_name` | Split on space, use first part. If no space, use entire `full_name` |
| **Last Name** | `full_name` | Split on space, use remaining parts. If no space, leave blank |
| **Email** | `email` | Direct mapping from webhook |
| **Phone** | `phone` | Direct mapping from webhook |
| **Address Line 1** | `street` | Direct mapping from webhook |
| **City** | `city` | Direct mapping from webhook |
| **State/Province** | `state` | Direct mapping from webhook |
| **Postal Code** | `zip` | Direct mapping from webhook |
| **Internal Notes** | See below | Formatted summary |

### Internal Notes Format:
```
Source: Doski Landing Page

Project Type: {{project_type}}
Approx Sq Ft: {{approx_sqft}}
Timeline: {{timeline}}
Owns Home: {{owns_home}}
Notes: {{notes}}
```

### Output:
- **Client ID** - This will be used in Action 2 to link the Request
- Store this as a variable: `{{Client ID from Action 1}}`

---

## ACTION 2: Create Request in Jobber

### App: Jobber
- **Event Type:** Create Request
- **Purpose:** Create a service request linked to the client created in Action 1

### Field Mappings:

| Jobber Field | Source | Notes |
|--------------|--------|-------|
| **Client** | `{{Client ID from Action 1}}` | Use the Client ID output from Action 1 |
| **Title** | `Garage Coating Request – {{full_name}}` | Format: "Garage Coating Request – [Full Name]" |
| **Description / Work Details** | See below | Formatted summary with all project details |

### Description / Work Details Format:
```
Lead Source: Doski Landing Page

Project Type: {{project_type}}
Approx Sq Ft: {{approx_sqft}}
Timeline: {{timeline}}
Owns Home: {{owns_home}}

Notes: {{notes}}

Contact Information:
- Email: {{email}}
- Phone: {{phone}}
- Address: {{street}}, {{city}}, {{state}} {{zip}}
```

### Output:
- **Request ID** - This will be used in SMS notifications
- Store this as a variable: `{{Request ID from Action 2}}`

---

## ACTION 3: Send SMS to Owner #1

### App: SMS by Zapier
- **Event Type:** Send SMS
- **Purpose:** Notify first owner of new lead

### Configuration:
- **To:** `+16077271214`
- **Message:** Use template below

### SMS Message Template:
```
NEW DOSKI LEAD

Name: {{full_name}}
Phone: {{phone}}
Email: {{email}}
City: {{city}}, {{state}}
Project: {{project_type}}
Sq Ft: {{approx_sqft}}
Timeline: {{timeline}}
Owns Home: {{owns_home}}

Jobber Client ID: {{Client ID from Action 1}}
Jobber Request ID: {{Request ID from Action 2}}
Notes: {{notes}}
```

---

## ACTION 4: Send SMS to Owner #2

### App: SMS by Zapier
- **Event Type:** Send SMS
- **Purpose:** Notify second owner of new lead

### Configuration:
- **To:** `+16073040878`
- **Message:** Use same template as Action 3

### SMS Message Template:
```
NEW DOSKI LEAD

Name: {{full_name}}
Phone: {{phone}}
Email: {{email}}
City: {{city}}, {{state}}
Project: {{project_type}}
Sq Ft: {{approx_sqft}}
Timeline: {{timeline}}
Owns Home: {{owns_home}}

Jobber Client ID: {{Client ID from Action 1}}
Jobber Request ID: {{Request ID from Action 2}}
Notes: {{notes}}
```

---

## ZAP SUMMARY

**Trigger:** Webhook receives lead data from landing page  
**Action 1:** Create Client in Jobber  
**Action 2:** Create Request in Jobber (linked to Client from Action 1)  
**Action 3:** Send SMS to +16077271214  
**Action 4:** Send SMS to +16073040878  

**Total Steps:** 1 Trigger + 4 Actions

---

## TESTING CHECKLIST

### Pre-Testing Setup:
- [ ] Zapier account created and connected
- [ ] Jobber account connected in Zapier
- [ ] SMS by Zapier account connected (or Twilio if using alternative)
- [ ] Webhook URL copied from Zapier trigger
- [ ] Webhook URL added to landing page form submission code

### Test Execution:
1. **Submit Test Lead**
   - [ ] Navigate to live landing page
   - [ ] Complete the quiz form with test data:
     - Full Name: "Test Lead"
     - Email: test@example.com
     - Phone: 6075559999
     - Address: 123 Test St, Binghamton, NY 13901
     - Project Type: Garage Floor Coating
     - Approx Sq Ft: 500
     - Timeline: Before Winter
     - Owns Home: Yes
     - Notes: This is a test lead

2. **Verify Webhook Trigger**
   - [ ] Check Zapier dashboard - Zap should show as "Triggered"
   - [ ] Click into the Zap run to view data
   - [ ] Verify all webhook fields are present and correctly formatted:
     - [ ] full_name
     - [ ] email
     - [ ] phone
     - [ ] street
     - [ ] city
     - [ ] state
     - [ ] zip
     - [ ] project_type
     - [ ] approx_sqft
     - [ ] timeline
     - [ ] owns_home
     - [ ] notes

3. **Verify Jobber Client Creation**
   - [ ] Log into Jobber account
   - [ ] Navigate to Clients section
   - [ ] Search for "Test Lead"
   - [ ] Verify client record exists with:
     - [ ] Correct name (first/last split if applicable)
     - [ ] Correct email address
     - [ ] Correct phone number
     - [ ] Complete address information
     - [ ] Internal Notes contain all project details
   - [ ] Copy the Client ID for reference

4. **Verify Jobber Request Creation**
   - [ ] In Jobber, navigate to Requests section
   - [ ] Find request titled "Garage Coating Request – Test Lead"
   - [ ] Verify request is linked to the correct client
   - [ ] Verify Description/Work Details contain:
     - [ ] Lead Source: Doski Landing Page
     - [ ] All project details (type, sq ft, timeline, etc.)
     - [ ] Contact information
     - [ ] Notes field
   - [ ] Copy the Request ID for reference

5. **Verify SMS Notifications**
   - [ ] Check phone +16077271214 for SMS
     - [ ] Verify message received
     - [ ] Verify all fields are present and correct
     - [ ] Verify Client ID and Request ID match Jobber records
   - [ ] Check phone +16073040878 for SMS
     - [ ] Verify message received
     - [ ] Verify all fields are present and correct
     - [ ] Verify Client ID and Request ID match Jobber records

### Post-Testing:
- [ ] Delete test client from Jobber (optional cleanup)
- [ ] Delete test request from Jobber (optional cleanup)
- [ ] Document any issues or field mapping adjustments needed
- [ ] Turn Zap ON if all tests pass

---

## NOTES & CONSIDERATIONS

### Name Splitting Logic:
If `full_name` contains a space, split it:
- First Name = Everything before the first space
- Last Name = Everything after the first space

If `full_name` has no space:
- First Name = Entire `full_name`
- Last Name = Leave blank

### Error Handling:
- Consider adding a Filter step after Action 1 to ensure Client was created before proceeding
- Add error notifications if any step fails
- Consider adding a delay between SMS sends if needed

### Field Formatting:
- Phone numbers: Ensure consistent formatting (with or without dashes)
- State: Use 2-letter abbreviation (NY, not New York)
- ZIP: Ensure 5-digit format

### Zap Settings:
- **Turn Zap ON** only after successful testing
- Enable **Error Notifications** in Zap settings
- Consider setting up **Zap History** monitoring

---

## SUPPORT & TROUBLESHOOTING

### Common Issues:
1. **Webhook not receiving data**
   - Verify webhook URL is correct in landing page code
   - Check that form submission is actually calling the webhook
   - Test webhook URL manually using a tool like Postman

2. **Jobber Client not created**
   - Verify Jobber connection is active in Zapier
   - Check field mappings match Jobber's required fields
   - Verify API permissions in Jobber account

3. **SMS not sending**
   - Verify SMS by Zapier account has credits
   - Check phone number format (must include country code: +1)
   - Verify SMS service is connected and active

4. **Field mapping errors**
   - Use Zapier's "Test" feature to see actual data at each step
   - Verify field names match exactly (case-sensitive)
   - Check for extra spaces or special characters

---

**Document Version:** 1.0  
**Last Updated:** [Current Date]  
**Created For:** Doski Concrete Coatings

